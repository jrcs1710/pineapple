<ui:composition template="../templates/template_gerencia.xhtml"
	xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:p="http://primefaces.org/ui">

	<ui:define name="conteudo">
		<div id="tooplate_middle">
			<div id="mid_title_4">Auditorias</div>
		</div>
		<div id="tooplate_main">
			<div class="col_w900">
				<div class="col_w450_2 float_l">
					<div id="cp_contact_form">
						<h:form method="post" style="content:text/html; charset:utf-8">

							<p:dataTable var="conf"
								value="#{auditoriaController.listAuditoria}">
								<p:column style="width:16px">
									<h:commandButton oncomplete="PF('patrimonioDialog').show()">
											<f:setPropertyActionListener target="#{auditoriaController.auditoria}" value="#{conf}"/>
											</h:commandButton>
								</p:column>
								
								<p:column headerText="Número da auditoria">
									<h:outputText value="#{conf.nrAuditoria}" />
								</p:column>

								<p:column headerText="Data de inicio">
									<h:outputText value="#{conf.dtInicio.time}">
										<f:convertDateTime pattern="dd/MM/yyyy" timeZone="GMT-03:00" />
									</h:outputText>
								</p:column>

								<p:column headerText="Data final">
									<h:outputText value="#{conf.dtFim.time}">
										<f:convertDateTime pattern="dd/MM/yyyy" timeZone="GMT-03:00" />
									</h:outputText>
								</p:column>

								<p:column headerText="Número de patrimônios contabilizados">
									<h:outputText value="#{conf.patrimonio.size()}" />
								</p:column>
							</p:dataTable>


							<p:dialog widgetVar="patrimonioDialog">
							<p:dataTable value="#{auditoriaController.auditoria.patrimonio}" var="patrimonio">
							<p:column headerText="Nº Patrimônio">
									<h:outputText value="#{patrimonio.cdPatrimonio}" />
								</p:column>

								<p:column headerText="Modelo">
									<h:outputText value="#{patrimonio.modelo.nome}"/>
										
								</p:column>
							<p:column headerText="Tipo">
									<h:outputText value="#{patrimonio.modelo.tipo.descricao}"/>
										
								</p:column>
							</p:dataTable>
							
							</p:dialog>
						

						</h:form>
					</div>
				</div>
				<div class="cleaner"></div>
			</div>
		</div>
	</ui:define>
</ui:composition>